<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="jp.co.ginga.infra.repository.facilitytype.FacilityTypeRepository">
	<resultMap
		type="jp.co.ginga.infra.repository.facilitytype.FacilityTypeEntity"
		id="facilityType">

		<result property="facilityTypeId" column="facility_type_id" />
		<result property="name" column="name" />
		<result property="insertDate" column="insert_date" />
		<result property="updateDate" column="update_date" />
		<result property="deleteDate" column="delete_date" />
		<result property="fgDelete" column="fg_delete" />
		<association property="insertUserEntity" column="user_id" />
		<association property="updateUserEntity"
			column="update_user_id" />
		<association property="deleteUserEntity"
			column="delete_user_id" />

	</resultMap>
	<select id="findAll" resultMap="facilityType">
		select
		facility_type_id,name from
		m_facility_type
		order by facility_type_id asc;
	</select>

	<select id="findOneById" resultMap="facilityType">
	select
	facility_type_id,name
	from
	m_facility_type
	where
	facility_type_id=#{facilityTypeId};
	</select>

	<select id="findByTypeName" resultMap="facilityType">
	select
	facility_type_id,name
	from
	m_facility_type
	where
	name = #{name};

	</select>

	<insert id="insert">
	insert into m_facility_type(
	<if test = "facilityTypeId !=0">
	facility_type_id,
	</if>
	name
	<if test="insertDate ==null">
	,insert_date,
	</if>
	user_id
	)
	values
	(
	<if test = "facilityTypeId !=0">
	#{facilityTypeId},
	</if>
	#{name},
	<if test="insertDate !=null">
	#{insertDate},
	</if>
	<if test="insertDate== null">
	NOW(),
	</if>
	#{insertUserEntity.userId}
	);
	</insert>

	<update id="update">
	update
	m_facility_type
	set
	name=#{name}
	,update_date=NOW()
	,update_user_id=#{updateUserEntity.userId}
	where
	facility_type_id=#{facilityTypeId};

	</update>

	<delete id="delete">
	delete
	from
	m_facility_type
	where
	facility_type_id=#{facilityTypeId};
	</delete>

</mapper>